# Руководство по тестированию: ATYASHEVO Сервис УКБ. Инд. критерий для исключения повторного распознавания адреса

## Обзор тестирования

### Цель тестирования
Проверить корректность работы классификатора "Отправлять на распознавание" для управления отправкой торговых точек на распознавание адресов в сервисе РиГ.

### Область тестирования
- **Классификатор**: Управление значениями "0", "1", "2" и пустым значением
- **Сервис РиГ**: Логика обработки классификатора
- **Автоматическая смена статусов**: Переключение после распознавания
- **Интеграция**: Работа с процессами создания и импорта ТТ

### Типы тестирования
- **Функциональное тестирование**: Проверка основной функциональности
- **Интеграционное тестирование**: Тестирование взаимодействия компонентов
- **Пользовательское тестирование**: UAT с реальными пользователями
- **Регрессионное тестирование**: Проверка влияния на существующую функциональность

## Подготовка к тестированию

### Тестовое окружение
- **Чикаго**: Обновленная версия с поддержкой классификатора
- **Сервис РиГ**: Настроенная логика обработки классификатора
- **База данных**: Обновленная схема с таблицами классификаторов
- **Тестовые данные**: Подготовленные ТТ с разными статусами

### Тестовые данные

#### Тестовые торговые точки
```json
{
  "testOutlets": [
    {
      "id": "TEST-001",
      "name": "Тестовая ТТ 1",
      "classifierValue": "0",
      "description": "ТТ с нейтральным статусом"
    },
    {
      "id": "TEST-002", 
      "name": "Тестовая ТТ 2",
      "classifierValue": "1",
      "description": "ТТ для отправки на распознавание"
    },
    {
      "id": "TEST-003",
      "name": "Тестовая ТТ 3",
      "classifierValue": "2",
      "description": "ТТ для игнорирования сервисом"
    },
    {
      "id": "TEST-004",
      "name": "Тестовая ТТ 4",
      "classifierValue": null,
      "description": "ТТ с пустым значением (серийный механизм)"
    }
  ]
}
```

#### Тестовые пользователи
- **Администратор**: Управление классификаторами
- **Пользователь**: Создание и редактирование ТТ
- **Тестировщик**: Выполнение тестовых сценариев

## Тестовые сценарии

### 1. Создание торговой точки вручную

#### Сценарий 1.1: Создание с классификатором "0"
**Цель**: Проверить создание ТТ с нейтральным статусом

**Шаги**:
1. Открыть Чикаго
2. Создать новую торговую точку
3. Установить классификатор "Отправлять на распознавание" = "0"
4. Заполнить остальные поля
5. Сохранить ТТ

**Ожидаемый результат**:
- ТТ создается успешно
- Классификатор установлен в "0"
- ТТ не отправляется на распознавание

**Критерии приемки**:
- ✅ ТТ сохраняется в системе
- ✅ Классификатор отображается корректно
- ✅ Сервис РиГ не получает запрос на распознавание

#### Сценарий 1.2: Создание с классификатором "1"
**Цель**: Проверить создание ТТ для отправки на распознавание

**Шаги**:
1. Создать новую торговую точку
2. Установить классификатор "Отправлять на распознавание" = "1"
3. Заполнить остальные поля
4. Сохранить ТТ

**Ожидаемый результат**:
- ТТ создается успешно
- Классификатор установлен в "1"
- ТТ отправляется на распознавание

#### Сценарий 1.3: Создание с классификатором "2"
**Цель**: Проверить создание ТТ для игнорирования сервисом

**Шаги**:
1. Создать новую торговую точку
2. Установить классификатор "Отправлять на распознавание" = "2"
3. Заполнить остальные поля
4. Сохранить ТТ

**Ожидаемый результат**:
- ТТ создается успешно
- Классификатор установлен в "2"
- Сервис РиГ игнорирует ТТ

#### Сценарий 1.4: Создание без классификатора
**Цель**: Проверить создание ТТ с пустым значением (серийный механизм)

**Шаги**:
1. Создать новую торговую точку
2. Не устанавливать классификатор "Отправлять на распознавание"
3. Заполнить остальные поля
4. Сохранить ТТ

**Ожидаемый результат**:
- ТТ создается успешно
- Классификатор не установлен (пустое значение)
- ТТ отправляется на распознавание (серийный механизм)

### 2. Импорт из Excel

#### Сценарий 2.1: Импорт с заданными значениями классификатора
**Цель**: Проверить импорт ТТ с различными значениями классификатора

**Шаги**:
1. Подготовить Excel файл с ТТ и значениями классификатора
2. Выполнить импорт из Excel
3. Проверить созданные ТТ
4. Проверить отправку на распознавание

**Ожидаемый результат**:
- ТТ импортируются с заданными значениями классификатора
- Логика обработки работает корректно
- ТТ с "1" отправляются на распознавание
- ТТ с "0" и "2" не отправляются

**Тестовые случаи**:
- ТТ с классификатором "0" - не отправляется
- ТТ с классификатором "1" - отправляется
- ТТ с классификатором "2" - не отправляется, игнорируется
- ТТ без классификатора - отправляется (серийный механизм)

#### Сценарий 2.2: Импорт без значений классификатора
**Цель**: Проверить импорт ТТ без указания классификатора

**Шаги**:
1. Подготовить Excel файл без колонки классификатора
2. Выполнить импорт из Excel
3. Проверить созданные ТТ

**Ожидаемый результат**:
- ТТ импортируются с классификатором "0" по умолчанию
- ТТ не отправляются на распознавание

### 3. Импорт из УС дистрибьютора

#### Сценарий 3.1: Автоматическое присвоение классификатора
**Цель**: Проверить автоматическое присвоение "0" при импорте от дистрибьютора

**Шаги**:
1. Настроить интеграцию с УС дистрибьютора
2. Получить файл с ТТ от дистрибьютора
3. Выполнить импорт
4. Проверить созданные ТТ

**Ожидаемый результат**:
- ТТ импортируются с классификатором "0"
- ТТ не отправляются на распознавание
- Интеграция работает корректно

### 4. Изменение адреса существующей ТТ

#### Сценарий 4.1: Изменение адреса с классификатором "0"
**Цель**: Проверить поведение при изменении адреса ТТ с нейтральным статусом

**Шаги**:
1. Создать ТТ с классификатором "0"
2. Изменить адрес ТТ
3. Проверить отправку на распознавание

**Ожидаемый результат**:
- Адрес изменяется успешно
- ТТ не отправляется на распознавание
- Классификатор остается "0"

#### Сценарий 4.2: Изменение адреса с классификатором "1"
**Цель**: Проверить поведение при изменении адреса ТТ для распознавания

**Шаги**:
1. Создать ТТ с классификатором "1"
2. Изменить адрес ТТ
3. Проверить отправку на распознавание

**Ожидаемый результат**:
- Адрес изменяется успешно
- ТТ отправляется на распознавание
- Классификатор остается "1"

#### Сценарий 4.3: Изменение адреса с классификатором "2"
**Цель**: Проверить поведение при изменении адреса ТТ для игнорирования

**Шаги**:
1. Создать ТТ с классификатором "2"
2. Изменить адрес ТТ
3. Проверить отправку на распознавание

**Ожидаемый результат**:
- Адрес изменяется успешно
- ТТ не отправляется на распознавание
- Сервис РиГ игнорирует ТТ

### 5. Автоматическая смена статусов

#### Сценарий 5.1: Успешное распознавание
**Цель**: Проверить автоматическое переключение "1" → "2" после успешного распознавания

**Шаги**:
1. Создать ТТ с классификатором "1"
2. Отправить ТТ на распознавание
3. Симулировать успешное распознавание
4. Проверить изменение классификатора

**Ожидаемый результат**:
- ТТ отправляется на распознавание
- После успешного распознавания классификатор меняется на "2"
- ТТ больше не отправляется на распознавание

#### Сценарий 5.2: Неудачное распознавание
**Цель**: Проверить автоматическое переключение "1" → "0" после неудачного распознавания

**Шаги**:
1. Создать ТТ с классификатором "1"
2. Отправить ТТ на распознавание
3. Симулировать неудачное распознавание
4. Проверить изменение классификатора

**Ожидаемый результат**:
- ТТ отправляется на распознавание
- После неудачного распознавания классификатор меняется на "0"
- ТТ не отправляется на повторное распознавание

### 6. Ручное изменение классификатора

#### Сценарий 6.1: Изменение с "0" на "1"
**Цель**: Проверить ручное изменение классификатора для отправки на распознавание

**Шаги**:
1. Создать ТТ с классификатором "0"
2. Изменить классификатор на "1"
3. Проверить отправку на распознавание

**Ожидаемый результат**:
- Классификатор изменяется на "1"
- ТТ отправляется на распознавание

#### Сценарий 6.2: Изменение с "1" на "2"
**Цель**: Проверить ручное изменение классификатора для остановки распознавания

**Шаги**:
1. Создать ТТ с классификатором "1"
2. Изменить классификатор на "2"
3. Проверить отправку на распознавание

**Ожидаемый результат**:
- Классификатор изменяется на "2"
- ТТ не отправляется на распознавание
- Сервис РиГ игнорирует ТТ

#### Сценарий 6.3: Изменение с "2" на "0"
**Цель**: Проверить невозможность изменения с "2" на "0"

**Шаги**:
1. Создать ТТ с классификатором "2"
2. Попытаться изменить классификатор на "0"
3. Проверить результат

**Ожидаемый результат**:
- Система не позволяет изменить классификатор с "2" на "0"
- Отображается сообщение об ошибке
- Классификатор остается "2"

### 7. Валидация данных

#### Сценарий 7.1: Некорректные значения классификатора
**Цель**: Проверить валидацию некорректных значений

**Шаги**:
1. Попытаться установить некорректное значение классификатора (например, "3")
2. Проверить обработку ошибки

**Ожидаемый результат**:
- Система показывает ошибку валидации
- Классификатор не устанавливается
- Указываются допустимые значения

#### Сценарий 7.2: Пустые значения
**Цель**: Проверить обработку пустых значений

**Шаги**:
1. Установить пустое значение классификатора
2. Проверить поведение системы

**Ожидаемый результат**:
- Пустое значение принимается
- Срабатывает серийный механизм
- ТТ отправляется на распознавание

### 8. Производительность

#### Сценарий 8.1: Массовая обработка ТТ
**Цель**: Проверить производительность при обработке большого количества ТТ

**Шаги**:
1. Создать 1000 ТТ с разными классификаторами
2. Запустить процесс распознавания
3. Измерить время обработки

**Ожидаемый результат**:
- Все ТТ обрабатываются корректно
- Время обработки приемлемое
- Система не падает

#### Сценарий 8.2: Одновременные изменения
**Цель**: Проверить работу при одновременном изменении классификаторов

**Шаги**:
1. Открыть несколько сессий
2. Одновременно изменять классификаторы разных ТТ
3. Проверить корректность данных

**Ожидаемый результат**:
- Все изменения сохраняются корректно
- Нет конфликтов данных
- Система работает стабильно

## Критерии приемки

### Функциональные критерии
- ✅ Все значения классификатора работают корректно
- ✅ Автоматическая смена статусов функционирует
- ✅ Интеграция с процессами создания/импорта работает
- ✅ Валидация данных работает корректно
- ✅ API для управления классификаторами функционирует

### Нефункциональные критерии
- ✅ Производительность не снизилась
- ✅ Система стабильна при массовой обработке
- ✅ Логирование работает корректно
- ✅ Аудит операций функционирует

### Пользовательские критерии
- ✅ Интерфейс управления классификаторами удобен
- ✅ Процесс настройки интуитивно понятен
- ✅ Ошибки отображаются понятно
- ✅ Документация доступна и актуальна

## План тестирования

### Этап 1: Подготовка (1 день)
- Настройка тестового окружения
- Подготовка тестовых данных
- Обучение тестировщиков

### Этап 2: Функциональное тестирование (3 дня)
- Тестирование всех значений классификатора
- Тестирование автоматической смены статусов
- Тестирование интеграции с процессами

### Этап 3: Интеграционное тестирование (2 дня)
- Тестирование взаимодействия компонентов
- Тестирование производительности
- Тестирование стабильности

### Этап 4: Пользовательское тестирование (2 дня)
- UAT с реальными пользователями
- Сбор обратной связи
- Исправление найденных проблем

### Этап 5: Регрессионное тестирование (1 день)
- Проверка влияния на существующую функциональность
- Тестирование производительности
- Финальная проверка

## Отчетность

### Ежедневные отчеты
- Количество выполненных тестов
- Найденные дефекты
- Статус тестирования

### Итоговый отчет
- Результаты всех тестов
- Список найденных дефектов
- Рекомендации по улучшению
- Готовность к релизу

## Заключение

### Ожидаемые результаты
- Все тестовые сценарии выполняются успешно
- Критерии приемки выполнены
- Система готова к продуктивному использованию

### Риски
- **Производительность**: Влияние на скорость обработки ТТ
- **Интеграция**: Сложности с обновлением сервиса РиГ
- **Пользовательский опыт**: Сложность нового интерфейса

### Митигация рисков
- Тщательное тестирование производительности
- Мониторинг работы системы
- Обучение пользователей
- Подготовка подробной документации

---
*Документ создан: 27.09.2025*  
*Версия: 1.0*  
*Статус: Готово к тестированию*
