# Руководство по тестированию: Ладога. МТ. Транзитные заказы

## Обзор тестирования

### Цель тестирования
Проверить корректность работы функциональности транзитных заказов в мобильном терминале, включая выбор параметров, валидацию и интеграцию с 1С.

### Область тестирования
- **Мобильный терминал**: Интерфейс выбора типа заказа и параметров
- **Валидация**: Проверка корректности выбранных параметров
- **Интеграция**: Передача данных в 1С
- **Бизнес-логика**: Расчет даты отгрузки и обработка заказов

### Типы тестирования
- **Функциональное тестирование**: Проверка основной функциональности
- **Интеграционное тестирование**: Тестирование взаимодействия с 1С
- **Пользовательское тестирование**: UAT с реальными пользователями
- **Регрессионное тестирование**: Проверка влияния на существующую функциональность

## Подготовка к тестированию

### Тестовое окружение
- **Мобильный терминал**: Обновленная версия с новой функциональностью
- **Чикаго**: Настроенная интеграция с 1С
- **1С**: Тестовая среда для приема данных
- **Тестовые данные**: Подготовленные заказы и параметры

### Тестовые данные

#### Тестовые заказы
```json
{
  "testOrders": [
    {
      "id": "TEST-001",
      "type": "Regular",
      "description": "Обычный заказ для базового тестирования"
    },
    {
      "id": "TEST-002", 
      "type": "TransitLD",
      "prefix": "V",
      "description": "Транзитный заказ через ЛД с префиксом V"
    },
    {
      "id": "TEST-003",
      "type": "TransitMonopol", 
      "shippingPoint": "Монополь",
      "prefix": "П",
      "description": "Транзитный заказ через Монополь с наличной оплатой"
    }
  ]
}
```

#### Тестовые пользователи
- **Менеджер по продажам**: Основной пользователь функциональности
- **Администратор**: Настройка и конфигурация
- **Тестировщик**: Выполнение тестовых сценариев

## Тестовые сценарии

### 1. Создание обычного заказа

#### Сценарий 1.1: Базовое создание заказа
**Цель**: Проверить, что обычные заказы создаются без изменений

**Шаги**:
1. Открыть мобильный терминал
2. Создать новый заказ
3. Выбрать тип "Обычный заказ"
4. Заполнить обязательные поля
5. Сохранить заказ

**Ожидаемый результат**:
- Заказ создается успешно
- Параметры транзитного заказа не отображаются
- Дата отгрузки соответствует дате клиента

**Критерии приемки**:
- ✅ Заказ сохраняется в системе
- ✅ Интерфейс не содержит лишних полей
- ✅ Интеграция с 1С работает как обычно

#### Сценарий 1.2: Проверка регрессии
**Цель**: Убедиться, что новая функциональность не нарушает существующую

**Шаги**:
1. Создать обычный заказ
2. Добавить товары в заказ
3. Рассчитать сумму
4. Отправить заказ

**Ожидаемый результат**:
- Все функции работают как раньше
- Производительность не снизилась
- Данные передаются корректно

### 2. Создание транзитного заказа через ЛД

#### Сценарий 2.1: Выбор префикса V
**Цель**: Проверить создание транзитного заказа с префиксом "Транзит через розничную продажу"

**Шаги**:
1. Создать новый заказ
2. Выбрать тип "Транзитный заказ"
3. Выбрать подтип "Розничная ЛД"
4. Выбрать префикс "V"
5. Заполнить остальные поля
6. Сохранить заказ

**Ожидаемый результат**:
- Заказ создается с типом TransitLD
- Префикс "V" сохраняется
- Дата отгрузки = дата клиента - 1 день
- Данные передаются в 1С

**Критерии приемки**:
- ✅ Префикс отображается в заказе
- ✅ Дата отгрузки рассчитывается корректно
- ✅ Контрагент определяется по префиксу

#### Сценарий 2.2: Выбор префикса Б
**Цель**: Проверить создание транзитного заказа с безналичным расчетом

**Шаги**:
1. Создать новый заказ
2. Выбрать тип "Транзитный заказ"
3. Выбрать подтип "Розничная ЛД"
4. Выбрать префикс "Б"
5. Заполнить остальные поля
6. Сохранить заказ

**Ожидаемый результат**:
- Заказ создается с префиксом "Б"
- Тип оплаты определяется как "Безналичный расчет с НДС"
- Дата отгрузки рассчитывается корректно

#### Сценарий 2.3: Валидация префиксов ЛД
**Цель**: Проверить, что доступны только корректные префиксы

**Шаги**:
1. Создать новый заказ
2. Выбрать тип "Транзитный заказ"
3. Выбрать подтип "Розничная ЛД"
4. Проверить список доступных префиксов

**Ожидаемый результат**:
- Доступны префиксы: V, Б, О, С
- Описания префиксов отображаются корректно
- Недоступные префиксы не отображаются

### 3. Создание транзитного заказа через Монополь

#### Сценарий 3.1: Выбор магазина и префикса
**Цель**: Проверить создание транзитного заказа через Монополь

**Шаги**:
1. Создать новый заказ
2. Выбрать тип "Транзитный заказ"
3. Выбрать подтип "Розничная Монополь"
4. Выбрать магазин "Монополь"
5. Выбрать префикс "П"
6. Заполнить остальные поля
7. Сохранить заказ

**Ожидаемый результат**:
- Заказ создается с типом TransitMonopol
- Магазин и префикс сохраняются
- Дата отгрузки рассчитывается корректно
- Контрагент определяется по магазину

**Критерии приемки**:
- ✅ Магазин отображается в заказе
- ✅ Префикс отображается в заказе
- ✅ Дата отгрузки = дата клиента - 1 день

#### Сценарий 3.2: Выбор разных магазинов
**Цель**: Проверить работу с различными магазинами Монополь

**Тестовые случаи**:
- Монополь
- Монополь-М
- Монополь-БР
- Монополь-Маркет
- Ран-Трейд

**Шаги**:
1. Для каждого магазина создать заказ
2. Выбрать соответствующий магазин
3. Выбрать любой префикс
4. Сохранить заказ

**Ожидаемый результат**:
- Все магазины доступны для выбора
- Заказы создаются корректно
- Контрагенты определяются правильно

#### Сценарий 3.3: Выбор разных префиксов
**Цель**: Проверить работу с различными префиксами Монополь

**Тестовые случаи**:
- П: Оплата водителю наличными (без чека)
- О: Оплата наличными ответственному сотруднику
- Ч: Оплата водителю наличными + чек
- Б: Безналичный расчет
- Ю: QR-код по безналичному расчету
- А: Безналичный расчет через третье лицо
- Т: Банковский терминал
- Д: Безналичный расчет (БАКалея)
- Н: Безналичный расчет с НДС

**Шаги**:
1. Для каждого префикса создать заказ
2. Выбрать магазин "Монополь"
3. Выбрать соответствующий префикс
4. Сохранить заказ

**Ожидаемый результат**:
- Все префиксы доступны для выбора
- Описания префиксов отображаются корректно
- Заказы создаются с правильными параметрами

### 4. Валидация данных

#### Сценарий 4.1: Обязательные поля
**Цель**: Проверить валидацию обязательных полей

**Шаги**:
1. Создать транзитный заказ
2. Не заполнять обязательные поля
3. Попытаться сохранить заказ

**Ожидаемый результат**:
- Система показывает ошибки валидации
- Заказ не сохраняется
- Указываются конкретные поля для заполнения

**Критерии приемки**:
- ✅ Ошибки отображаются понятно
- ✅ Поля подсвечиваются красным
- ✅ Можно исправить ошибки и сохранить

#### Сценарий 4.2: Некорректные комбинации
**Цель**: Проверить валидацию некорректных комбинаций параметров

**Тестовые случаи**:
- Выбор Монополь без выбора магазина
- Выбор Монополь без выбора префикса
- Выбор ЛД с префиксом Монополь
- Выбор Монополь с префиксом ЛД

**Шаги**:
1. Создать заказ с некорректной комбинацией
2. Попытаться сохранить заказ

**Ожидаемый результат**:
- Система показывает ошибку валидации
- Заказ не сохраняется
- Указывается конкретная проблема

### 5. Интеграция с 1С

#### Сценарий 5.1: Успешная передача данных
**Цель**: Проверить корректную передачу данных в 1С

**Шаги**:
1. Создать транзитный заказ
2. Сохранить заказ
3. Проверить передачу в 1С
4. Проверить данные в 1С

**Ожидаемый результат**:
- Данные передаются в 1С
- Все параметры сохраняются корректно
- В 1С создается соответствующий документ

**Критерии приемки**:
- ✅ Нет ошибок при передаче
- ✅ Данные в 1С соответствуют заказу
- ✅ Префиксы обрабатываются корректно

#### Сценарий 5.2: Обработка ошибок интеграции
**Цель**: Проверить обработку ошибок при интеграции с 1С

**Шаги**:
1. Отключить 1С
2. Создать транзитный заказ
3. Попытаться сохранить заказ
4. Включить 1С
5. Повторить сохранение

**Ожидаемый результат**:
- Система обрабатывает ошибку интеграции
- Заказ сохраняется локально
- При восстановлении связи данные передаются

### 6. Расчет даты отгрузки

#### Сценарий 6.1: Обычный заказ
**Цель**: Проверить расчет даты для обычного заказа

**Шаги**:
1. Создать обычный заказ
2. Установить дату отгрузки клиента
3. Сохранить заказ
4. Проверить дату отгрузки

**Ожидаемый результат**:
- Дата отгрузки = дата отгрузки клиента
- Изменений в расчете нет

#### Сценарий 6.2: Транзитный заказ
**Цель**: Проверить расчет даты для транзитного заказа

**Шаги**:
1. Создать транзитный заказ
2. Установить дату отгрузки клиента
3. Сохранить заказ
4. Проверить дату отгрузки

**Ожидаемый результат**:
- Дата отгрузки = дата отгрузки клиента - 1 день
- Расчет выполняется автоматически

**Тестовые случаи**:
- Дата клиента: 01.10.2025 → Дата отгрузки: 30.09.2025
- Дата клиента: 15.10.2025 → Дата отгрузки: 14.10.2025
- Дата клиента: 01.01.2025 → Дата отгрузки: 31.12.2024

## Критерии приемки

### Функциональные критерии
- ✅ Все типы заказов создаются корректно
- ✅ Все префиксы доступны и работают
- ✅ Все магазины Монополь доступны
- ✅ Валидация работает корректно
- ✅ Дата отгрузки рассчитывается правильно
- ✅ Интеграция с 1С работает

### Нефункциональные критерии
- ✅ Производительность не снизилась
- ✅ Интерфейс удобен для использования
- ✅ Ошибки обрабатываются корректно
- ✅ Система стабильна

### Пользовательские критерии
- ✅ Менеджеры могут легко создавать транзитные заказы
- ✅ Процесс интуитивно понятен
- ✅ Время создания заказа не увеличилось значительно
- ✅ Ошибки понятны и исправимы

## План тестирования

### Этап 1: Подготовка (1 день)
- Настройка тестового окружения
- Подготовка тестовых данных
- Обучение тестировщиков

### Этап 2: Функциональное тестирование (3 дня)
- Тестирование создания заказов
- Тестирование валидации
- Тестирование расчета дат

### Этап 3: Интеграционное тестирование (2 дня)
- Тестирование интеграции с 1С
- Тестирование обработки ошибок
- Тестирование производительности

### Этап 4: Пользовательское тестирование (2 дня)
- UAT с реальными пользователями
- Сбор обратной связи
- Исправление найденных проблем

### Этап 5: Регрессионное тестирование (1 день)
- Проверка влияния на существующую функциональность
- Тестирование производительности
- Финальная проверка

## Отчетность

### Ежедневные отчеты
- Количество выполненных тестов
- Найденные дефекты
- Статус тестирования

### Итоговый отчет
- Результаты всех тестов
- Список найденных дефектов
- Рекомендации по улучшению
- Готовность к релизу

## Заключение

### Ожидаемые результаты
- Все тестовые сценарии выполняются успешно
- Критерии приемки выполнены
- Система готова к продуктивному использованию

### Риски
- **Интеграция с 1С**: Возможные проблемы с передачей данных
- **Производительность**: Влияние на скорость работы МТ
- **Пользовательский опыт**: Сложность нового интерфейса

### Митигация рисков
- Тщательное тестирование интеграции
- Мониторинг производительности
- Обучение пользователей
- Подготовка инструкций

---
*Документ создан: 27.09.2025*  
*Версия: 1.0*  
*Статус: Готово к тестированию*
