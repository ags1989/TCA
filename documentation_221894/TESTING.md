# Тестирование "Транзитные заказы"

## Обзор тестирования

Система "Транзитные заказы" прошла тестирование на основе сценариев из User Stories и исправления ошибок в TFS.

## Тестовые сценарии (из TFS)

### 1. User Story 227560: Выбор ДА

**Описание**: При выборе "Да" в поле "Транзитный заказ" открывается форма выбора дополнительных атрибутов

**Шаги воспроизведения**:
1. Открыть документ "Заказ" в МТ
2. Перейти в раздел "Реквизиты документа"
3. Нажать на поле "Транзитный заказ"
4. Выбрать значение "Да"

**Ожидаемый результат**:
- Открывается форма выбора дополнительных атрибутов
- Доступны варианты выбора типа лицензии
- Форма запоминает значения по умолчанию

### 2. User Story 228037: Редактирование атрибута после сохранения

**Описание**: Возможность редактирования выбранных атрибутов после сохранения документа

**Шаги воспроизведения**:
1. Выбрать "Да" в поле "Транзитный заказ"
2. Заполнить все необходимые атрибуты
3. Сохранить документ
4. Открыть документ для редактирования
5. Изменить значение "Транзитный заказ" на "Нет" и обратно на "Да"

**Ожидаемый результат**:
- Форма открывается с ранее выбранными значениями
- Возможность изменения выбранных атрибутов
- Корректное сохранение изменений

### 3. User Story 230862: Редактирование атрибута (JS)

**Описание**: Реализация редактирования атрибутов через JavaScript

**Шаги воспроизведения**:
1. Открыть форму выбора атрибутов
2. Выбрать различные комбинации атрибутов
3. Сохранить и повторно открыть форму

**Ожидаемый результат**:
- Корректная работа JavaScript логики
- Сохранение выбранных значений
- Валидация введенных данных

### 4. User Story 230063: Выбор ДА (JS)

**Описание**: Реализация выбора "Да" через JavaScript

**Шаги воспроизведения**:
1. Открыть документ "Заказ"
2. Использовать JavaScript для выбора "Да"
3. Проверить открытие формы атрибутов

**Ожидаемый результат**:
- JavaScript корректно обрабатывает выбор
- Форма атрибутов открывается автоматически
- Все функции работают через JavaScript

## Исправленные ошибки (из TFS)

### 1. Ошибка 231567: Кнопка "Сохранить" в окне Тип лицензии

**Проблема**: Кнопка "Сохранить" неактивна при открытии формы выбора доп.атрибутов

**Исправление**:
- При открытии формы выбора доп.атрибутов форма запоминает значения по дефолту
- Если выбранные значения будут совпадать со значениями по дефолту, кнопка "Сохранить" не будет доступна
- Выполняется проверка, все ли доступные значения формы заполнены
- Кнопка "Сохранить" будет доступна только при условии, что все доступные значения заполнены, а также значения не равны значениям по умолчанию

**Тестирование**:
1. Открыть форму выбора атрибутов
2. Проверить, что кнопка "Сохранить" неактивна при значениях по умолчанию
3. Изменить хотя бы одно значение
4. Проверить, что кнопка "Сохранить" стала активной
5. Заполнить все обязательные поля
6. Проверить, что кнопка "Сохранить" остается активной

### 2. Ошибка 231570: Логика возвращения значений

**Проблема**: При изменении значения Транзитного заказа с "Да" на "Нет" не возвращаются значения по умолчанию

**Исправление**:
- Реализована логика возвращения значений по умолчанию при изменении значения Транзитного заказа с "Да" на "Нет"

**Тестирование**:
1. Выбрать "Да" в поле "Транзитный заказ"
2. Заполнить дополнительные атрибуты
3. Изменить значение на "Нет"
4. Проверить, что значения вернулись к умолчанию
5. Изменить обратно на "Да"
6. Проверить, что форма открылась с значениями по умолчанию

### 3. Ошибка 231484: Лишняя строка с нулями

**Проблема**: В выгрузке ХП появляется лишняя строка с нулевыми значениями

**Исправление**:
- Добавлена фильтрация в выгрузку ХП для исключения нулевых значений

**Тестирование**:
1. Создать транзитный заказ
2. Заполнить все необходимые атрибуты
3. Выполнить выгрузку ХП
4. Проверить, что в выгрузке нет строк с нулевыми значениями

## Результаты тестирования

### Успешно протестировано
- Выбор типа лицензии (оптовая/розничная)
- Выбор магазина для розничной монополи
- Выбор префикса заказа
- Сохранение и редактирование атрибутов
- Валидация обязательных полей
- Логика возвращения значений по умолчанию
- Фильтрация нулевых значений в выгрузке

### Проблемы, требующие внимания
- Необходимо дополнительное тестирование производительности при большом количестве атрибутов
- Рекомендуется тестирование на различных устройствах МТ

## Рекомендации по тестированию

### Регулярное тестирование
- Проверка работы формы выбора атрибутов после обновлений
- Валидация корректности передачи данных в 1С
- Проверка синхронизации справочников между Chicago и МТ

### Тестирование производительности
- Время загрузки формы атрибутов
- Скорость сохранения выбранных значений
- Производительность при работе с большими справочниками