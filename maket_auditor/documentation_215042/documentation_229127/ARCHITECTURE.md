# РђСЂС…РёС‚РµРєС‚СѓСЂР° СЃРёСЃС‚РµРјС‹

## РћР±Р·РѕСЂ Р°СЂС…РёС‚РµРєС‚СѓСЂС‹

РЎРёСЃС‚РµРјР° РёРЅС‚РµРіСЂР°С†РёРё РњРў СЃ Track and Trace РїРѕСЃС‚СЂРѕРµРЅР° РЅР° РјРёРєСЂРѕСЃРµСЂРІРёСЃРЅРѕР№ Р°СЂС…РёС‚РµРєС‚СѓСЂРµ СЃ С‡РµС‚РєРёРј СЂР°Р·РґРµР»РµРЅРёРµРј РѕС‚РІРµС‚СЃС‚РІРµРЅРЅРѕСЃС‚Рё РјРµР¶РґСѓ РєРѕРјРїРѕРЅРµРЅС‚Р°РјРё.

## РћСЃРЅРѕРІРЅС‹Рµ РєРѕРјРїРѕРЅРµРЅС‚С‹

### 1. РњРѕР±РёР»СЊРЅРѕРµ РїСЂРёР»РѕР¶РµРЅРёРµ РњРў
- **РўРµС…РЅРѕР»РѕРіРёСЏ:** Xamarin.Forms / .NET MAUI
- **Р’РµСЂСЃРёСЏ:** 2.0+
- **Р РѕР»СЊ:** РљР»РёРµРЅС‚СЃРєРёР№ РёРЅС‚РµСЂС„РµР№СЃ РґР»СЏ Р°РіРµРЅС‚РѕРІ
- **Р¤СѓРЅРєС†РёРё:**
  - РЎРєР°РЅРёСЂРѕРІР°РЅРёРµ QR-РєРѕРґРѕРІ
  - РЎРѕР·РґР°РЅРёРµ РґРѕРєСѓРјРµРЅС‚РѕРІ РѕС‚РіСЂСѓР·РєРё
  - РЎРёРЅС…СЂРѕРЅРёР·Р°С†РёСЏ СЃ СЃРµСЂРІРµСЂРѕРј

### 2. API Miami (Backend)
- **РўРµС…РЅРѕР»РѕРіРёСЏ:** ASP.NET Core 6.0
- **Р’РµСЂСЃРёСЏ:** 2.0.0
- **Р РѕР»СЊ:** РџСЂРѕРјРµР¶СѓС‚РѕС‡РЅС‹Р№ API РјРµР¶РґСѓ РњРў Рё РІРЅРµС€РЅРёРјРё СЃРёСЃС‚РµРјР°РјРё
- **Р¤СѓРЅРєС†РёРё:**
  - Р’Р°Р»РёРґР°С†РёСЏ QR-РєРѕРґРѕРІ С‡РµСЂРµР· T&T API
  - РЈРїСЂР°РІР»РµРЅРёРµ СЃРµСЃСЃРёСЏРјРё РїРѕР»СЊР·РѕРІР°С‚РµР»РµР№
  - РљСЌС€РёСЂРѕРІР°РЅРёРµ РґР°РЅРЅС‹С…

### 3. Р‘Р°Р·Р° РґР°РЅРЅС‹С… Р§РёРєР°РіРѕ
- **РўРµС…РЅРѕР»РѕРіРёСЏ:** Microsoft SQL Server 2019
- **Р’РµСЂСЃРёСЏ:** 15.0.2000.5
- **Р РѕР»СЊ:** Р¦РµРЅС‚СЂР°Р»СЊРЅРѕРµ С…СЂР°РЅРёР»РёС‰Рµ РґР°РЅРЅС‹С…
- **Р¤СѓРЅРєС†РёРё:**
  - РҐСЂР°РЅРµРЅРёРµ С‚РѕРІР°СЂРѕРІ Рё QR-РєРѕРґРѕРІ
  - РЈРїСЂР°РІР»РµРЅРёРµ РѕС‚РіСЂСѓР·РєР°РјРё
  - РЎРёРЅС…СЂРѕРЅРёР·Р°С†РёСЏ СЃ SAP

### 4. Track and Trace API
- **РўРµС…РЅРѕР»РѕРіРёСЏ:** REST API
- **Р’РµСЂСЃРёСЏ:** v2.0
- **Р РѕР»СЊ:** Р’РЅРµС€РЅРёР№ СЃРµСЂРІРёСЃ РІР°Р»РёРґР°С†РёРё
- **Р¤СѓРЅРєС†РёРё:**
  - Р’Р°Р»РёРґР°С†РёСЏ QR-РєРѕРґРѕРІ С‚РѕРІР°СЂРѕРІ
  - РћР±СЂР°Р±РѕС‚РєР° РѕС‚РіСЂСѓР·РѕРє
  - РЈРїСЂР°РІР»РµРЅРёРµ СЃРµСЃСЃРёСЏРјРё

### 5. ST Р РµРїР»РёРєР°С†РёСЏ
- **РўРµС…РЅРѕР»РѕРіРёСЏ:** Custom Replication Service
- **Р’РµСЂСЃРёСЏ:** 1.5.0
- **Р РѕР»СЊ:** РЎРёРЅС…СЂРѕРЅРёР·Р°С†РёСЏ СЃ SAP
- **Р¤СѓРЅРєС†РёРё:**
  - Р РµРїР»РёРєР°С†РёСЏ С‚РѕРІР°СЂРѕРІ РёР· SAP
  - РџРµСЂРµРґР°С‡Р° РѕС‚РіСЂСѓР·РѕРє РІ SAP
  - РЈРїСЂР°РІР»РµРЅРёРµ РєРѕРЅС„Р»РёРєС‚Р°РјРё РґР°РЅРЅС‹С…

## РўРµС…РЅРѕР»РѕРіРёС‡РµСЃРєРёР№ СЃС‚РµРє

### Backend
- **Framework:** ASP.NET Core 6.0
- **Database:** SQL Server 2019
- **ORM:** Entity Framework Core 6.0
- **Authentication:** JWT Bearer Tokens
- **Logging:** Serilog
- **Caching:** Redis 6.2

### Frontend
- **Framework:** Xamarin.Forms 5.0
- **Platform:** iOS 12+, Android 8.0+
- **QR Scanner:** ZXing.Net.Mobile
- **HTTP Client:** HttpClient
- **JSON:** Newtonsoft.Json

### Infrastructure
- **Container:** Docker 20.10
- **Orchestration:** Docker Compose
- **Reverse Proxy:** Nginx 1.20
- **Monitoring:** Prometheus + Grafana
- **Logging:** ELK Stack

## РџРѕС‚РѕРєРё РґР°РЅРЅС‹С…

### 1. РЎРєР°РЅРёСЂРѕРІР°РЅРёРµ QR-РєРѕРґР°
`
РњРў в†’ API Miami в†’ T&T API в†’ Р’Р°Р»РёРґР°С†РёСЏ в†’ РћС‚РІРµС‚ в†’ РњРў
`

### 2. РЎРѕР·РґР°РЅРёРµ РѕС‚РіСЂСѓР·РєРё
`
РњРў в†’ API Miami в†’ Р§РёРєР°РіРѕ DB в†’ ST Р РµРїР»РёРєР°С†РёСЏ в†’ SAP
`

### 3. РЎРёРЅС…СЂРѕРЅРёР·Р°С†РёСЏ С‚РѕРІР°СЂРѕРІ
`
SAP в†’ ST Р РµРїР»РёРєР°С†РёСЏ в†’ Р§РёРєР°РіРѕ DB в†’ API Miami в†’ РњРў
`

## РћР±СЂР°Р±РѕС‚РєР° РѕС€РёР±РѕРє

### РЈСЂРѕРІРЅРё РѕС€РёР±РѕРє
1. **РљР»РёРµРЅС‚СЃРєРёРµ РѕС€РёР±РєРё (4xx)**
   - РќРµРІРµСЂРЅС‹Рµ РїР°СЂР°РјРµС‚СЂС‹ Р·Р°РїСЂРѕСЃР°
   - РћС‚СЃСѓС‚СЃС‚РІРёРµ Р°РІС‚РѕСЂРёР·Р°С†РёРё
   - РќРµРІР°Р»РёРґРЅС‹Рµ QR-РєРѕРґС‹

2. **РЎРµСЂРІРµСЂРЅС‹Рµ РѕС€РёР±РєРё (5xx)**
   - Р’РЅСѓС‚СЂРµРЅРЅРёРµ РѕС€РёР±РєРё РїСЂРёР»РѕР¶РµРЅРёСЏ
   - РћС€РёР±РєРё Р±Р°Р·С‹ РґР°РЅРЅС‹С…
   - РќРµРґРѕСЃС‚СѓРїРЅРѕСЃС‚СЊ РІРЅРµС€РЅРёС… СЃРµСЂРІРёСЃРѕРІ

3. **РЎРµС‚РµРІС‹Рµ РѕС€РёР±РєРё**
   - РўР°Р№РјР°СѓС‚С‹ СЃРѕРµРґРёРЅРµРЅРёСЏ
   - РќРµРґРѕСЃС‚СѓРїРЅРѕСЃС‚СЊ СЃРµСЂРІРёСЃРѕРІ
   - РџСЂРѕР±Р»РµРјС‹ СЃ DNS

### РЎС‚СЂР°С‚РµРіРёРё РІРѕСЃСЃС‚Р°РЅРѕРІР»РµРЅРёСЏ
- **Retry РјРµС…Р°РЅРёР·Рј:** 3 РїРѕРїС‹С‚РєРё СЃ СЌРєСЃРїРѕРЅРµРЅС†РёР°Р»СЊРЅРѕР№ Р·Р°РґРµСЂР¶РєРѕР№
- **Circuit Breaker:** РђРІС‚РѕРјР°С‚РёС‡РµСЃРєРѕРµ РѕС‚РєР»СЋС‡РµРЅРёРµ РїСЂРё СЃР±РѕСЏС…
- **Fallback:** Р РµР·РµСЂРІРЅС‹Рµ РјРµС…Р°РЅРёР·РјС‹ РѕР±СЂР°Р±РѕС‚РєРё
- **Graceful Degradation:** Р§Р°СЃС‚РёС‡РЅР°СЏ С„СѓРЅРєС†РёРѕРЅР°Р»СЊРЅРѕСЃС‚СЊ РїСЂРё СЃР±РѕСЏС…

## Р‘РµР·РѕРїР°СЃРЅРѕСЃС‚СЊ

### РђСѓС‚РµРЅС‚РёС„РёРєР°С†РёСЏ
- **JWT С‚РѕРєРµРЅС‹** РґР»СЏ API Miami
- **Bearer С‚РѕРєРµРЅС‹** РґР»СЏ T&T API
- **РЎРµСЂС‚РёС„РёРєР°С‚С‹** РґР»СЏ SAP РёРЅС‚РµРіСЂР°С†РёРё

### РђРІС‚РѕСЂРёР·Р°С†РёСЏ
- **Role-based access control (RBAC)**
- **Resource-based permissions**
- **API rate limiting**

### РЁРёС„СЂРѕРІР°РЅРёРµ
- **HTTPS** РґР»СЏ РІСЃРµС… СЃРѕРµРґРёРЅРµРЅРёР№
- **TLS 1.2+** РґР»СЏ Р·Р°С‰РёС‚С‹ РґР°РЅРЅС‹С…
- **AES-256** РґР»СЏ С€РёС„СЂРѕРІР°РЅРёСЏ С‡СѓРІСЃС‚РІРёС‚РµР»СЊРЅС‹С… РґР°РЅРЅС‹С…

## РњР°СЃС€С‚Р°Р±РёСЂСѓРµРјРѕСЃС‚СЊ

### Р“РѕСЂРёР·РѕРЅС‚Р°Р»СЊРЅРѕРµ РјР°СЃС€С‚Р°Р±РёСЂРѕРІР°РЅРёРµ
- **Load Balancer:** Nginx
- **API Miami:** Docker Swarm / Kubernetes
- **Database:** Read Replicas

### Р’РµСЂС‚РёРєР°Р»СЊРЅРѕРµ РјР°СЃС€С‚Р°Р±РёСЂРѕРІР°РЅРёРµ
- **CPU:** 4+ cores
- **RAM:** 8+ GB
- **Storage:** SSD 100+ GB

## РњРѕРЅРёС‚РѕСЂРёРЅРі

### РњРµС‚СЂРёРєРё
- **Performance:** Response time, throughput
- **Availability:** Uptime, error rate
- **Business:** QR scans, shipments created
- **Infrastructure:** CPU, memory, disk usage

### РђР»РµСЂС‚С‹
- **Critical:** Service down, database errors
- **Warning:** High response time, low success rate
- **Info:** New deployments, configuration changes

## Р Р°Р·РІРµСЂС‚С‹РІР°РЅРёРµ

### РЎСЂРµРґР° СЂР°Р·СЂР°Р±РѕС‚РєРё
- **Local development:** Docker Compose
- **CI/CD:** Azure DevOps Pipelines
- **Testing:** Automated unit and integration tests

### РџСЂРѕРґСѓРєС‚РёРІРЅР°СЏ СЃСЂРµРґР°
- **Blue-Green deployment**
- **Database migrations**
- **Rollback procedures**

---
*РђСЂС…РёС‚РµРєС‚СѓСЂР° РѕСЃРЅРѕРІР°РЅР° РЅР° РґР°РЅРЅС‹С… РёР· Р·Р°РїСЂРѕСЃР° 229127 Рё СЃРІСЏР·Р°РЅРЅС‹С… С‚РёРєРµС‚РѕРІ*
